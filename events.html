<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Apishops JS API 2</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script src="js/vendor/jquery.min.js"></script>
    <script src="js/apishopsForm.github.js"></script>
    <link rel="stylesheet" href="css/apishopsForm.github.css">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Apishops JS API 2</h1>
        <p>Подключаемые к страницам формы оформления заказов и обратных звонков</p>

        <p class="view"><a href="index.html">Знакомство</a></p>
        <p class="view"><a href="installation.html">Подключение</a></p>
        <p class="view"><a href="params.html">Параметры</a></p>
        <hr>
        <p class="view"><a href="featured.html">Рекомендуемые товары</a></p>
        <p class="view"><a href="themes.html">Темы</a></p><p class="view"><a href="gifts.html">Подарки</a></p>
        <p class="view"><a href="markup.html">Свои формы</a></p>
        <p class="view"><a href="splitdata.html">Отдельная подгрузка данных</a></p>
        <hr>
        <p class="view"><a href="faq.html">FAQ</a></p>
        <p class="view"><a href="constructor/">Конструктор форм</a></p>
        <br><br>

        <ul>
          <li><a href="https://github.com/apishops/apishopsForm/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/apishops/apishopsForm">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>

      <section>
        <div class="page-header">

        <h1>Собственные события и обработчики событий</h1>
                    <div class="row">
                      <p class="alert alert-info">
                        Плагин подключаемой формы дает возможность "вешать" свои функции к обработчикам событий.
                       </p>
                       <div>


                      <h3>Событие onCancel</h3>
                    <div class="row">
                      <p class="alert alert-info">
                        Возникает тогда, когда происходит отмена полной загрузки плагина. Это происходит в том случае, если товар недоступен на складе. Тогда с формой заказа необходимо произвести определенные манипуляции (например скрыть, заблокировать или вывести сообщение о недоступности товара)
                       </p>
                       <div>

<pre class="prettyprint linenums">
        $(&#x27;#containerId2_3&#x27;).apishopsForm({ callback:1,
            type:&#x27;inline&#x27;, /*&#x442;&#x438;&#x43F; &#x43E;&#x442;&#x43A;&#x440;&#x44B;&#x442;&#x438;&#x44F; [inline|modal]*/
            successUrl:false, /*url &#x431;&#x43B;&#x430;&#x433;&#x43E;&#x434;&#x430;&#x440;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x441;&#x442;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x44B; [url|false]*/
            form:&#x27;light&#x27;, /*&#x442;&#x438;&#x43F; &#x444;&#x43E;&#x440;&#x43C;&#x44B; [normal|light|jquery-selector]*/
            siteId:387700,
            productId:1013683,
            lang:1,
            onCancel: function() {
                alert(&#x27;&#x414;&#x430;&#x43D;&#x43D;&#x44B;&#x439; &#x442;&#x43E;&#x432;&#x430;&#x440; &#x441;&#x435;&#x439;&#x447;&#x430;&#x441; &#x43D;&#x435;&#x434;&#x43E;&#x441;&#x442;&#x443;&#x43F;&#x435;&#x43D; &#x43D;&#x430; &#x441;&#x43A;&#x43B;&#x430;&#x434;&#x435;&#x27;);
            }
        });
</pre>


                      <h3>Событие beforeSend</h3>
                    <div class="row">
                      <p class="alert alert-info">
                        Обработчик этого события вызывается <b>перед</b> отправкой заказа в систему. Этот обработчик полезно использовать, для отправки информации по целям в Яндекс.Метрику
                       </p>
                       <div>

<pre class="prettyprint linenums">
        $(&#x27;#containerId2_3&#x27;).apishopsForm({ callback:1,
            type:&#x27;inline&#x27;, /*&#x442;&#x438;&#x43F; &#x43E;&#x442;&#x43A;&#x440;&#x44B;&#x442;&#x438;&#x44F; [inline|modal]*/
            successUrl:false, /*url &#x431;&#x43B;&#x430;&#x433;&#x43E;&#x434;&#x430;&#x440;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x441;&#x442;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x44B; [url|false]*/
            form:&#x27;light&#x27;, /*&#x442;&#x438;&#x43F; &#x444;&#x43E;&#x440;&#x43C;&#x44B; [normal|light|jquery-selector]*/
            siteId:387700,
            productId:1013683,
            lang:1,
            beforeSend: function() {
                yaCounter12345.reachGoal(&#x27;beforeSend&#x27;);
            }
        });
</pre>



                      <h3>Событие afterSend</h3>
                    <div class="row">
                      <p class="alert alert-info">
                        Обработчик этого события вызывается уже  <b>после</b> отправки заказа в систему. Этот обработчик полезно использовать, для отправки информации по целям в Яндекс.Метрику
                       </p>
                       <div>

<pre class="prettyprint linenums">
        var apishops=$(&#x27;#containerId5_3&#x27;).apishopsForm({
            type:&#x27;inline&#x27;, /*&#x442;&#x438;&#x43F; &#x43E;&#x442;&#x43A;&#x440;&#x44B;&#x442;&#x438;&#x44F; [inline|modal]*/
            successUrl:false, /*url &#x431;&#x43B;&#x430;&#x433;&#x43E;&#x434;&#x430;&#x440;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x441;&#x442;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x44B; [url|false]*/
            form:&#x27;light&#x27;, /*&#x442;&#x438;&#x43F; &#x444;&#x43E;&#x440;&#x43C;&#x44B; [normal|light|jquery-selector]*/
            siteId:387700,
            productId:1013683,
            lang:1
        });
        $(apishops).on( &#x22;afterSend&#x22;, function( event, params ) {
            alert("Заказ с номером "+data.id+" принят в ситему");
            yaCounter12345.reachGoal(&#x27;beforeSend&#x27;);
        });
</pre>


                      <h3>Событие onLoaded</h3>
                    <div class="row">
                      <p class="alert alert-info">
                        Это событие вызывается после загрузки информации по товару и возвращает объект, который содержит информацию по товару . Этот обработчик удобно использовать для коррекции цены товара или его названия
                       </p>
                      <p class="alert alert-info">
                        В качестве доступных значений доступны следующие:
                        <ul>
                            <li>price – цена товара</li>
                            <li>oldPrice — старая цена товара</li>
                            <li>name — название товара</li>
                            <li>description – описание товара</li>
                            <li>discount – скидка по товару</li>
                        </ul>
                       </p>
                       <div>

<pre class="prettyprint linenums">
        var apishops=$(&#x27;#containerId5_3&#x27;).apishopsForm({
            type:&#x27;inline&#x27;, /*&#x442;&#x438;&#x43F; &#x43E;&#x442;&#x43A;&#x440;&#x44B;&#x442;&#x438;&#x44F; [inline|modal]*/
            successUrl:false, /*url &#x431;&#x43B;&#x430;&#x433;&#x43E;&#x434;&#x430;&#x440;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x43E;&#x439; &#x441;&#x442;&#x440;&#x430;&#x43D;&#x438;&#x446;&#x44B; [url|false]*/
            form:&#x27;light&#x27;, /*&#x442;&#x438;&#x43F; &#x444;&#x43E;&#x440;&#x43C;&#x44B; [normal|light|jquery-selector]*/
            siteId:387700,
            productId:1013683,
            lang:1
        });
        $(apishops).on( &#x22;onLoaded&#x22;, function( event, params ) {
            alert(&#x22;&#x422;&#x43E;&#x432;&#x430;&#x440; &#x22;+params.name+&#x22; &#x438;&#x43C;&#x435;&#x435;&#x442; &#x446;&#x435;&#x43D;&#x443; &#x22;+ params.price+&#x22;(&#x441;&#x442;&#x430;&#x440;&#x430;&#x44F; &#x446;&#x435;&#x43D;&#x430; &#x22;+params.oldPrice+&#x22;)&#x22;);
        });
</pre>






      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/apishops">apishops</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>